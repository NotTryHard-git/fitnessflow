syntax = "proto3";

package user;

service UserService {
    // CRUD пользователей
    rpc CreateUser(CreateUserRequest) returns (UserResponse);
    rpc GetUser(GetUserRequest) returns (UserResponse);
    rpc UpdateUser(UpdateUserRequest) returns (SuccessResponse);
    rpc DeleteUser(DeleteUserRequest) returns (SuccessResponse);
    
    // Проверка подписки
    rpc ValidateUser(ValidateUserRequest) returns (ValidateUserResponse);
    
    // Аутентификация
    rpc Authenticate(AuthRequest) returns (AuthResponse);
}

message CreateUserRequest {
    string email = 1;
    string first_name = 2;
    string last_name = 3;
    string phone = 4;
    string user_type = 5;
    optional string subscription_end = 6;
    string password = 7;
}

message GetUserRequest {
    string user_id = 1;
}

message UpdateUserRequest {
    string user_id = 1;
    optional string first_name = 2;
    optional string last_name = 3;
    optional string phone = 4;
    optional string subscription_end = 5;
    optional string status = 6;
}

message DeleteUserRequest {
    string user_id = 1;
}

message ValidateUserRequest {
    string user_id = 1;
    string workout_datetime = 2;
}

message AuthRequest {
    string email = 1;
    string password = 2;
}

message UserResponse {
    string user_id = 1;
    string email = 2;
    string first_name = 3;
    string last_name = 4;
    string phone = 5;
    string user_type = 6;
    string subscription_end = 7;
    string status = 8;
}

message ValidateUserResponse {
    bool valid = 1;
    string message = 2;
}

message AuthResponse {
    bool success = 1;
    string token = 2;
    string user_id = 3;
    string user_type = 4;
}

message SuccessResponse {
    bool success = 1;
    string message = 2;
}

message Empty {}